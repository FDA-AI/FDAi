<md-content layout-padding>
    <md-list class="md-dense" flex>
        <md-list-item ng-repeat="clientUser in state.users"
                      class="noright">
            <a href="{{clientUser.userUrl}}"
               target="_blank">
                <img alt="{{ clientUser.displayName }}"
                     ng-src="{{ clientUser.avatarImage }}"
                     class="md-avatar"/>
            </a>
            <div class="md-list-item-text">
                <h3>{{ clientUser.displayName }} </h3>
                <md-tooltip md-direction="down">
                    User ID {{ clientUser.id }} {{ clientUser.userEmail }} (last active {{clientUser.lastActive}})
                </md-tooltip>
            </div>
            <md-button ng-if="!clientUser.stripeActive"
                       class="md-secondary md-icon-button"
                       style="font-size: 30px;"
                       ng-click="upgradeUser(clientUser)"
                       aria-label="delete">
                <md-icon class="ion-arrow-up-a">
                    <md-tooltip md-direction="down">Upgrade User</md-tooltip>
                </md-icon>
            </md-button>
            <md-button class="md-secondary md-icon-button" style="font-size: 30px;"
                       ng-click="switchToPatientInNewTab(clientUser)" aria-label="switch">
                <md-icon class="ion-arrow-swap">
                    <md-tooltip md-direction="down">Act as {{ clientUser.displayName }}</md-tooltip>
                </md-icon>
            </md-button>
            <md-button class="md-secondary md-icon-button" style="font-size: 30px;"
                       ng-click="switchToPatientInNewTab(clientUser, true)" aria-label="switch">
                <md-icon class="ion-android-open">
                    <md-tooltip md-direction="down">Act as {{ clientUser.displayName }} in New Window</md-tooltip>
                </md-icon>
            </md-button>
            <md-button ng-if="clientUser.email" class="md-secondary md-icon-button" style="font-size: 30px;"
                       ng-click="sendEmail(appSettings.appDisplayName, clientUser.email)" aria-label="email">
                <md-icon class="ion-paper-airplane">
                    <md-tooltip md-direction="down">Send Message</md-tooltip>
                </md-icon>
            </md-button>
        </md-list-item>
    </md-list>
</md-content>
